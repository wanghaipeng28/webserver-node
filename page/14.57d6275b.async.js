(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{P9Q7:function(e,t,a){"use strict";a.r(t);a("4JrI");var r=a("kAeg"),n=(a("FKw2"),a("AXN6")),i=(a("fRG5"),a("J+xt")),o=a("BAbT"),l=(a("kFVg"),a("bTPH")),s=(a("sbMj"),a("H4M2")),c=a("gvoz"),u=a("UI0R"),m=a("72t7"),p=a("TOBq"),d=a("mXGw"),f=a.n(d),b=a("9kvl"),v=a("Le8g"),g=a.n(v),h=(a("TFil"),a("fRgM")),y=(a("1ZTF"),a("2//r")),w=a("rQJw"),L=a.n(w),k=(a("ttYz"),a("g5Li")),x=a("t9Gk"),C=(a("nzKD"),a("qgEq")),E=a("3EJg"),S=(a("WHCb"),a("XkWK")),O=a("sOtv"),j=a("Z0bF"),R=function(e){var t=e.value,a=Object(j["a"])(e,["value"]);return f.a.createElement(S["a"],Object(O["a"])({value:""===t?void 0:t},a,{allowClear:!0}))},V=R,I=function(e){var t=e.visible,a=e.values,r=e.onSubmit,n=e.onSubmitLoading,i=e.onCancel,l=e.isCreate,c=e.targetList,u=e.rewriteList,m=C["a"].useForm(),p=Object(E["a"])(m,1),d=p[0],b={pathRewrite:(null===a||void 0===a?void 0:a.pathRewrite)||"",source:(null===a||void 0===a?void 0:a.source)||"",target:(null===a||void 0===a?void 0:a.target)||""};t&&setTimeout((function(){return d.resetFields()}),20);var v=function(){var e=Object(x["a"])(L.a.mark((function e(){var t;return L.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.validateFields();case 3:t=e.sent,r(Object(o["a"])(Object(o["a"])({},b),t),d),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),k["default"].warning("\u8868\u5355\u63d0\u4ea4\u5f02\u5e38\uff01");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(x["a"])(L.a.mark((function e(){return L.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f.a.createElement(h["a"],{destroyOnClose:!0,maskClosable:!1,title:"\u65b0\u589e/\u4fee\u6539",visible:t,onCancel:g,footer:[f.a.createElement(s["a"],{key:"back",onClick:function(){return g()}},"\u53d6\u6d88"),f.a.createElement(s["a"],{key:"submit",type:"primary",htmlType:"submit",loading:n,onClick:function(){return v()}},"\u63d0\u4ea4")]},f.a.createElement(C["a"],{form:d,name:"createform",labelCol:{span:4},initialValues:{pathRewrite:b.pathRewrite,source:b.source,target:b.target}},f.a.createElement(C["a"].Item,{label:"\u6e90URL",name:"source",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6e90URL"}]},f.a.createElement(y["a"],{disabled:!l,placeholder:"\u8bf7\u8f93\u5165\u6e90URL"})),f.a.createElement(C["a"].Item,{label:"\u76ee\u7684\u4e3b\u673a",name:"target",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u76ee\u7684\u4e3b\u673a"}]},l?f.a.createElement(y["a"],{placeholder:"\u8bf7\u8f93\u5165\u76ee\u7684\u4e3b\u673a"}):f.a.createElement(V,{options:c.map((function(e){return{label:e,value:e}})),placeholder:"\u8bf7\u9009\u62e9"})),f.a.createElement(C["a"].Item,{label:"\u8def\u5f84\u91cd\u5199",name:"pathRewrite",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8def\u5f84\u91cd\u5199"}]},l?f.a.createElement(y["a"],{placeholder:"\u8bf7\u8f93\u5165\u8def\u5f84\u91cd\u5199"}):f.a.createElement(V,{options:u.map((function(e){return{label:e,value:e}})),placeholder:"\u8bf7\u9009\u62e9"}))))},D=Object(b["b"])((function(e){var t=e.Home;return{targetList:t.proxyData.targetList,rewriteList:t.proxyData.rewriteList}}))(I),F=function(e){Object(m["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;Object(c["a"])(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),e.state={columns:[{title:"\u6e90URl",dataIndex:"source",key:"source"},{title:"\u76ee\u7684\u4e3b\u673a",dataIndex:"target",key:"target"},{title:"\u8def\u5f84\u91cd\u5199",dataIndex:"pathRewrite",key:"pathRewrite"},{title:"\u64cd\u4f5c",dataIndex:"operation",width:160,render:function(t,a){return f.a.createElement("span",null,f.a.createElement(s["a"],{type:"link",onClick:function(){return e.updateProxy(a)}},"\u4fee\u6539"),f.a.createElement(l["a"],{title:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6761\u76ee\u5417\uff1f",okText:"\u662f",cancelText:"\u5426",onConfirm:function(){return e.deleteProxy(a)}},f.a.createElement(s["a"],{danger:!0,type:"link"},"\u5220\u9664")))}}],formVisiable:!1,formValue:{},onSubmitLoading:!1,isCreate:!0},e.onFinish=function(t,a){var r=e.props.dispatch;e.setState({onSubmitLoading:!0}),r({type:"Home/proxyListCallServer",code:2,values:t}).then((function(){e.setState({onSubmitLoading:!1,formVisiable:!1})})).catch((function(){e.setState({onSubmitLoading:!1})}))},e.onCancel=function(){e.setState({formVisiable:!1})},e.updateProxy=function(t){var a=Object(o["a"])({},t);e.setState({isCreate:!1,formValue:a,formVisiable:!0})},e.addProxyInfo=function(){e.setState({isCreate:!0,formVisiable:!0,formValue:{}})},e.deleteProxy=function(t){var a=e.props.dispatch;a({type:"Home/proxyListCallServer",code:3,values:t.key})},e}return Object(u["a"])(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"Home/proxyListCallServer",code:1})}},{key:"render",value:function(){var e=this.props,t=e.listData,a=e.listLoading,o=this.state,l=o.columns,c=o.formVisiable,u=o.formValue,m=o.onSubmitLoading,p=o.isCreate;return f.a.createElement(r["a"],{className:g.a.homeBoxCard,title:"\u4ee3\u7406\u4fe1\u606f\u8868"},f.a.createElement(s["a"],{className:g.a.addBtn,type:"primary",onClick:this.addProxyInfo},"\u65b0\u589e\u4ee3\u7406\u4fe1\u606f"),f.a.createElement(n["a"],{tip:"Loading...",spinning:a},f.a.createElement(i["a"],{size:"small",bordered:!0,columns:l,dataSource:t})),f.a.createElement(D,{visible:c,values:u,onSubmitLoading:m,isCreate:p,onSubmit:this.onFinish,onCancel:this.onCancel}))}}]),a}(d["Component"]);t["default"]=Object(b["b"])((function(e){var t=e.Home,a=e.loading;return{listData:t.proxyData.listData,targetList:t.proxyData.targetList,rewriteList:t.proxyData.rewriteList,listLoading:a.effects["Home/proxyListCallServer"]}}))(F)}}]);